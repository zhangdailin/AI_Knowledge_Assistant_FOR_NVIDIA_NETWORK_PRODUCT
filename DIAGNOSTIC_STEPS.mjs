/**
 * 诊断：检查前端是否能正确调用服务器API
 */

console.log(`
╔════════════════════════════════════════════════════════════════╗
║           诊断：前端API调用问题                                ║
╚════════════════════════════════════════════════════════════════╝

【问题现象】
用户仍然看到"没有找到"的消息，尽管已经修复了代码。

【可能的原因】

1. 前端代码还没有重新编译
   - 修改了 TypeScript 文件
   - 需要重新编译才能生效
   - 浏览器缓存可能导致旧代码继续运行

2. 前端无法连接到服务器API
   - 服务器没有运行
   - 网络连接问题
   - CORS 配置问题

3. 服务器API返回错误
   - API 端点不存在
   - 服务器内部错误
   - 数据库问题

【诊断步骤】

1. 检查浏览器控制台:
   打开浏览器开发者工具 (F12)
   查看 Console 标签
   查看是否有错误信息，特别是：
   - "搜索 chunks 失败"
   - "向量搜索失败"
   - 网络错误

2. 检查 Network 标签:
   查询"如何配置BGP"
   查看是否有对以下API的请求：
   - /api/chunks/search
   - /api/chunks/vector-search
   如果没有请求，说明前端没有调用API
   如果有请求但失败，检查错误状态码

3. 检查服务器日志:
   运行 npm run dev
   查看终端输出
   查看是否有错误信息

【解决方案】

1. 完全重启应用:
   \`\`\`bash
   # 停止当前运行的应用
   Ctrl+C

   # 清除缓存
   rm -rf node_modules/.vite

   # 重新启动
   npm run dev
   \`\`\`

2. 清除浏览器缓存:
   - 打开浏览器开发者工具 (F12)
   - 右键点击刷新按钮
   - 选择"清空缓存并硬性重新加载"
   - 或使用无痕模式

3. 检查服务器是否正在运行:
   - 打开浏览器
   - 访问 http://localhost:8787/
   - 应该看到某种响应（不是"无法连接"）

【关键检查项】

✓ 代码修复已完成 (src/lib/retrieval.ts)
? 前端代码是否重新编译？
? 浏览器缓存是否清除？
? 服务器是否正在运行？
? 前端是否能连接到服务器？

【下一步】

请完成以下步骤，然后重新测试：
1. 停止应用 (Ctrl+C)
2. 清除缓存 (rm -rf node_modules/.vite)
3. 重新启动 (npm run dev)
4. 清除浏览器缓存
5. 重新测试查询"如何配置BGP"
`);
